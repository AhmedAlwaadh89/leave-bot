# نظام إدارة الإجازات عبر تيليجرام

هذا المشروع يهدف إلى بناء نظام لإدارة إجازات الموظفين باستخدام بوت تيليجرام. يمكن للموظفين تقديم طلبات الإجازة، والاستعلام عن رصيد الإجازات، وتلقي إشعارات بحالة طلباتهم. يمكن للمدراء مراجعة الطلبات والموافقة عليها أو رفضها.

## الميزات

- تقديم طلبات الإجازة عبر بوت تيليجرام.
- الاستعلام عن رصيد الإجازات.
- إشعارات فورية بحالة الطلبات (مقبولة، مرفوضة، قيد المراجعة).
- واجهة للمدراء لمراجعة الطلبات واتخاذ الإجراءات اللازمة.
- تقارير واستعلامات متنوعة.

## التقنيات المستخدمة

- Python
- `python-telegram-bot`
- Flask
- SQLite

## التشغيل محلياً (Running Locally)

1. **تثبيت المتطلبات**:
   ```bash
   pip install -r requirements.txt
   ```

2. **إعداد قاعدة البيانات**:
   - سيتم إنشاء قاعدة البيانات تلقائياً عند تشغيل التطبيق لأول مرة.
   - إذا كنت تقوم بالتحديث من نسخة سابقة، قم بتشغيل سكريبت الترحيل:
     ```bash
     python migrate_db.py
     ```

3. **إعداد متغيرات البيئة**:
   - قم بإنشاء ملف `.env` أو قم بتعيين المتغيرات في التيرمينال:
     ```bash
     set TELEGRAM_BOT_TOKEN=your_token_here
     set FLASK_SECRET_KEY=your_secret_key
     ```

4. **تشغيل البوت**:
   ```bash
   python bot.py
   ```

5. **تشغيل واجهة الإدارة (Web App)**:
   - في نافذة تيرمينال جديدة:
     ```bash
     python app.py
     ```
   - افتح المتصفح على الرابط: `http://127.0.0.1:5000`
   - اسم المستخدم الافتراضي: `admin`
   - كلمة المرور الافتراضية: `secret`

## النشر

يمكن نشر هذا التطبيق على منصات مثل Heroku. تأكد من تعيين متغيرات البيئة التالية:

- `TELEGRAM_BOT_TOKEN`: رمز بوت التليجرام الخاص بك.
- `ADMIN_USERNAME`: اسم المستخدم لواجهة المدير (الافتراضي: `admin`).
- `ADMIN_PASSWORD`: كلمة المرور لواجهة المدير (الافتراضي: `secret`).

للنشر على Heroku، اتبع الخطوات التالية:

1. قم بإنشاء حساب على Heroku.
2. قم بتثبيت Heroku CLI.
3. قم بتسجيل الدخول إلى حسابك باستخدام `heroku login`.
4. قم بإنشاء تطبيق جديد باستخدام `heroku create`.
5. قم بدفع الشيفرة المصدرية إلى Heroku باستخدام `git push heroku main`.
6. قم بتعيين متغير البيئة `TELEGRAM_BOT_TOKEN` باستخدام `heroku config:set TELEGRAM_BOT_TOKEN=YOUR_TOKEN`.
7. تأكد من تشغيل التطبيق باستخدام `heroku ps:scale web=1 worker=1`.
